(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{5520:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>b});var o=n(7876);let r=function(e){let t="h-25 w-25 bg-accent m-4 "+e.className;return(0,o.jsx)("div",{className:t})};function s(e){return(0,o.jsx)("button",{onClick:()=>{e.onClick()},className:"bg-accent m-5 border-4 border-blue-900 text-white font-bold py-2 px-4 rounded",children:(0,o.jsx)("p",{children:e.text+" "+e.value})})}let a=1e5,l=0,d=!1,i=new Event("moneyUpdated"),c={MoneyProcess:function(){void 0!=window&&window.setInterval(()=>{a+=l,d&&"undefined"==typeof window||(d=!0,document?.dispatchEvent(i))},1e3)},RemoveMoney:function(e){a-=e,"undefined"!=typeof window&&document?.dispatchEvent(i)},GetMoney:function(){return a},AddIncome:function(e){l+=e},GetIncome:function(){return l}},u=[],m=new Event("slotsUpdated"),p={BuySlot:function(){var e;console.log("Buying slot "+(u=[...u,{hasPlant:!1,hasWorker:!1,growthProgress:0}]).length),null==(e=document)||e.dispatchEvent(m)},PlantWorkerInNextAvailableSlot:function(){var e;for(let e=0;e<u.length;e++)if(!u[e].hasWorker){u[e].hasWorker=!0;break}c.AddIncome(1),null==(e=document)||e.dispatchEvent(m)},GetSlots:function(){return u}},f={items:[{name:"plot",cost:2e3,description:"A worker that can be assigned to tasks.",purchase:()=>p.BuySlot()},{name:"worker",cost:100,description:"A worker that can be assigned to tasks.",purchase:()=>p.PlantWorkerInNextAvailableSlot(),dependancies:["plot"]}]},h={},v={BuyItemFromStore:function(e){let t=f.items[e];if(void 0==t||c.GetMoney()<t.cost)return!1;if(void 0!=t.dependancies){let e=h[t.name],n=void 0==h[t.name]?0:e;for(let e=0;e<t.dependancies.length;e++){let o=t.dependancies[e];if(void 0==h[o]||h[o]<=n)return!1}}return void 0==h[t.name]&&(h[t.name]=0),h[t.name]+=1,c.RemoveMoney(t.cost),!0},items:f,ownedItems:h};var x=n(4232);function y(e,t){return{...e,[t.payload]:(e[t.payload]||0)+1}}let w=function(){var e;let[t,n]=(0,x.useState)(c.GetMoney()),[r,a]=(0,x.useState)(0),[l,d]=(0,x.useReducer)(y,v.ownedItems);null==(e=document)||e.addEventListener("moneyUpdated",()=>{n(c.GetMoney()),a(c.GetIncome())});let i=[];for(let e=0;e<v.items.items.length;e++){let t=v.items.items[e].name,n=l[e];i.push((0,o.jsx)(s,{text:t,value:void 0==n?0:n,onClick:()=>{var t;return t=e,void(v.BuyItemFromStore(t)&&(v.items.items[t].purchase(),d({type:"update",payload:t})))}},e))}return(0,o.jsxs)("div",{className:"top-0 left-0 flex flex-col bg-secondary border-6 border-emerald-800 sticky h-screen",children:[(0,o.jsx)("h2",{className:"text-text align-middle p-10 pb-3 pt-5",children:"Sidebar"}),i.map(e=>e),(0,o.jsx)("p",{className:"text-text align-middle p-10",children:"$"+r+" /s"}),(0,o.jsx)("p",{className:"text-text align-middle p-10",children:"$"+t})]})};function b(){var e;let[t,n]=(0,x.useState)(p.GetSlots);return null==(e=document)||e.addEventListener("slotsUpdated",()=>{n([...p.GetSlots()])}),(0,o.jsxs)("div",{className:"flex bg-primary h-screen overflow-scroll w-full",children:[(0,o.jsx)(w,{}),(0,o.jsx)("div",{className:"flex flex-wrap bg-primary ",children:t.map((e,t)=>{c.MoneyProcess();let n="";return e.hasPlant&&(n+=" bg-green-400"),e.hasWorker&&(console.log("Worker in slot "+t),n+=" border-8 border-secondary"),(0,o.jsx)(r,{className:n},t)})})]})}n(8115)},6760:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(5520)}])}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(6760)),_N_E=e.O()}]);